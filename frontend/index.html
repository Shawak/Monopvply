<!DOCTYPE html>
<html>
<head>
    <script src="https://cdn.rawgit.com/konvajs/konva/1.4.0/konva.min.js"></script>
	<script src="./js/map.js?a=1"></script>
	<script src="./js/predefinedMaps.js?a=1"></script>
	<script src="./js/field.js?a=1"></script>
	<script src="./js/menu.js?a=1"></script>
	<script src="./js/globalFuncs.js?a=1"></script>
    <meta charset="utf-8">
    <title>Konva Zoom Relative to Stage Demo</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: #F0F0F0;
        }
		.overlay 
		{
			background: white;  
			display: inline-block;       
			position: absolute;  
			top: 0px;                
			left: 0px;
			z-index:100;
			width:100%;
			height:100%;
		}
    </style>
</head>
<body>
	
	<div class="overlay" id="overlayDiv">
		<img style="display: block;margin: auto;" id="loading-img" src="./img/Loading.gif"></img>
	</div>
	
    <div id="container"></div>
    <script>
		
		document.getElementById("loading-img").addEventListener('load', startRendering)
		
        var width = window.innerWidth;
        var height = window.innerHeight;
        var stage = new Konva.Stage(
		{
            container: 'container',
            width: width,
            height: height
        });
		stage.hide(true);
		var gameMap;
		var ingameMenu;
		
		function startRendering()
		{
			ingameMenu=new Menu(stage);
			ingameMenu.addMenuBackground(30, 20, 240, 500);
			var myAlert=function(txt)
			{
				alert(txt);
			}
			var boundAlert=myAlert.bind(null,"Yay, you clicked Button 1!");
			ingameMenu.addButton(50, 40, 80, 30, "Button1", boundAlert, "Some information");
			
			var boundAlert2=myAlert.bind(null,"Yay, you clicked Field Card 'Browser Games'!");
			ingameMenu.addFieldCard(50, 80, 70, 80, "Browser Games", "blue", boundAlert2);
			
			var boundAlert3=myAlert.bind(null,"Yay, you clicked Field Card 'General Gaming'!");
			ingameMenu.addFieldCard(80, 80, 70, 80, "General Gaming", "blue", boundAlert3);
			
			gameMap=new Map(stage);
			setUpStandardMap(gameMap);
		}
		/*
		window.addEventListener('contextmenu', (e) => 
		{
            //e.preventDefault();
			//background.rotate(90);
			//layer.draw();
		});
		*/

    </script>
</body>
</html>